<!DOCTYPE html>
<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Babylon.js sample code</title><script src="https://code.jquery.com/pep/0.4.2/pep.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.2/dat.gui.min.js"></script><script src="https://preview.babylonjs.com/ammo.js"></script><script src="https://preview.babylonjs.com/cannon.js"></script><script src="https://preview.babylonjs.com/Oimo.js"></script><script src="https://preview.babylonjs.com/gltf_validator.js"></script><script src="https://preview.babylonjs.com/earcut.min.js"></script><script src="https://preview.babylonjs.com/babylon.js"></script><script src="https://preview.babylonjs.com/inspector/babylon.inspector.bundle.js"></script><script src="https://preview.babylonjs.com/materialsLibrary/babylonjs.materials.min.js"></script><script src="https://preview.babylonjs.com/proceduralTexturesLibrary/babylonjs.proceduralTextures.min.js"></script><script src="https://preview.babylonjs.com/postProcessesLibrary/babylonjs.postProcess.min.js"></script><script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.js"></script><script src="https://preview.babylonjs.com/serializers/babylonjs.serializers.min.js"></script><script src="https://preview.babylonjs.com/gui/babylon.gui.min.js"></script><style>
            html, body {
                overflow: hidden;
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }

            #renderCanvas {
                width: 100%;
                height: 100%;
                touch-action: none;
            }
        </style></head><body>
    <canvas id="renderCanvas"></canvas><script>
        var canvas = document.getElementById("renderCanvas");

        var delayCreateScene = function () {
        
            // This is really important to tell Babylon.js to use decomposeLerp and matrix interpolation
            BABYLON.Animation.AllowMatricesInterpolation = true;
        
            var scene = new BABYLON.Scene(engine);
            var camera = new BABYLON.ArcRotateCamera("camera1", Math.PI / 2, Math.PI / 4, 3, new BABYLON.Vector3(0, 1, 0), scene);
                camera.attachControl(canvas, true);
                camera.wheelDeltaPercentage = 0.01;
        	var light = new BABYLON.HemisphericLight("light1", new BABYLON.Vector3(0, 1, 0), scene);
        	
        	BABYLON.SceneLoader.ImportMesh("", "./scenes/", "dummy3.babylon", scene, function (newMeshes, particleSystems, skeletons) {
                var skeleton = skeletons[0];
        
                // UI
                var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");
                var UiPanel = new BABYLON.GUI.StackPanel();
                UiPanel.width = "220px"; UiPanel.fontSize = "14px";
                UiPanel.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_RIGHT;
                UiPanel.verticalAlignment = BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER;
                advancedTexture.addControl(UiPanel);
        
                // animate
                var walkRange = skeleton.getAnimationRange("YBot_Walk");
                var button1 = BABYLON.GUI.Button.CreateSimpleButton("but2", "Play Walk");
                button1.paddingTop = "10px"; button1.width = "100px"; button1.height = "50px";
                button1.color = "white"; 
                button1.onPointerDownObservable.add(()=> {
                    if (walkRange) scene.beginAnimation(skeleton, walkRange.from, walkRange.to, false);
                });
                UiPanel.addControl(button1); 
            });	
        
            return scene;
        };
        
        
        var engine = new BABYLON.Engine(canvas, true, { preserveDrawingBuffer: true, stencil: true });
        var scene = delayCreateScene();

        engine.runRenderLoop(function () {
            if (scene) {
                scene.render();
            }
        });

        // Resize
        window.addEventListener("resize", function () {
            engine.resize();
        });
    </script></body></html>
