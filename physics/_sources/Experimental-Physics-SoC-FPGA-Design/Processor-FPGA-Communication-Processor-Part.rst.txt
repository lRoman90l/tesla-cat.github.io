
Processor-FPGA Communication: Processor Part
===========================================================

:Date: 14 Aug 2019

`Corresponding Project Folder`_
------------------------------------------

.. _Corresponding Project Folder: https://github.com/tesla-cat/Works-Done-In-Dzmitry-s-Lab-At-CQT/tree/master/Cyclone%20V%20SoC%20Control%20System/Quartus%20Project/HPS_FPGA_LED

Dependency
-------------

- Edit the system environment variables

Processor Part
--------------------------------

**Step 1** Add :code:`quartus\sopc_builder\bin` to **PATH** environment variable, in my case :code:`D:\QUARTUS\quartus\sopc_builder\bin`

**Step 2** Install `Intel SoC FPGA Embedded Development Suite`_

- Search program **SoC EDS command shell** in your computer and run it

.. _Intel SoC FPGA Embedded Development Suite: http://fpgasoftware.intel.com/soceds/18.1/?edition=standard&platform=windows&download_manager=direct

**Step 3** Generate necessary C header file

- In **SoC EDS command shell** go to your Quartus project folder and execute :code:`./generate_hps_qys_header.sh`. This **automatically** generates :code:`hps_0.h` C header file based on :code:`soc_system.sopcinfo` file. :code:`hps_0.h` contains **address infomation** we set earlier in FPGA part: e.g. :code:`#define LED_PIO_BASE 0x3000` is in it
- We can then use the macro :code:`LED_PIO_BASE` later in our main C program conveniently

**Step 4** Write the main C program, refer to :code:`main.c` and read the comments there

**Step 5** Compile the C program

- In **SoC EDS command shell** go to the project folder and execute :code:`make`

**Step 6** Copy the file to DE10-Nano Board and execute

TO BE CONTINUED





